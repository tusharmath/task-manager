(function(){!function(a){var b,c,d;return d=function(a){return document.querySelector(a)},c=function(a){return document.querySelectorAll(a)},b=function(){function a(b){"string"==typeof b?(this._domItem=d(b),this._selector=b):b instanceof HTMLElement?this._domItem=b:b instanceof a&&(this._domItem=b._domItem)}return a.prototype.live=function(a,b){var d=this;return document.addEventListener(a,function(a){var e,f,g,h,i;for(h=c(d._selector),i=[],f=0,g=h.length;g>f;f++)e=h[f],e===a.srcElement?i.push(b(a.srcElement,a)):i.push(void 0);return i}),this},a.prototype.click=function(a){return this._domItem.addEventListener("click",a),this},a.prototype.append=function(b){var c;return c=document.createElement(b),this._domItem.appendChild(c),new a(c)},a.prototype.addClass=function(a){var b;return(b=null===this.attr("class"))?this.attr("class",a):this.attr("class",b+" "+a),this},a.prototype.attr=function(a,b){return void 0!==b?(this._domItem.setAttribute(a,b),this):this._domItem.getAttribute(a)},a.prototype.val=function(a){return void 0!==a?(this._domItem.value=a,this):this._domItem.value},a.prototype.innerHtml=function(a){return void 0!==a?(this._domItem.innerHTML=a,this):this._domItem.innerHTML},a}(),a.$=function(a){return new b(a)},a.$.all=function(a){var b;return function(){var d,e,f,g;for(f=c(a),g=[],d=0,e=f.length;e>d;d++)b=f[d],g.push($(b));return g}()}}(window),function(a){var b,c,d;return c=function(){function a(){this._Categories=[],this.selectedCategory=-1}return a.prototype.addCategory=function(a){return this._Categories.push(new b(a))},a.prototype.removeCategory=function(a){return this._Categories.splice(a,1)},a.prototype.getAllTasks=function(a){return null==a&&(a=this.selectedCategory),this._Categories[a].getAllTasks()},a.prototype.getAllCategorys=function(){return this._Categories},a.prototype.getCategoryCount=function(){return this._Categories.length},a.prototype.setCategorySelectedIndex=function(a){return this.selectedCategory=Number(a)},a.prototype.getCategorySelectedIndex=function(){return this.selectedCategory},a.prototype.addTask=function(a,b){return null==b&&(b=this.selectedCategory),this._Categories[b].addTask(new d(a))},a.prototype.removeTask=function(a,b){return null==b&&(b=this.selectedCategory),this._Categories[b].deleteTask(a)},a.prototype.updateTask=function(a,b,c){return null==c&&(c=this.selectedCategory),this._Categories[c].getTask(Number(a)).update(b)},a.prototype.getTask=function(a,b){return null==b&&(b=this.selectedCategory),this._Categories[b].getTask(Number(a))},a}(),b=function(){function a(a){this.name=a,this._tasks=[]}return a.prototype.addTask=function(a){return this._tasks.push(a)},a.prototype.deleteTask=function(a){return this._tasks.splice(a,1)},a.prototype.CategoryTasks=function(){return this._tasks},a.prototype.getTask=function(a){return this._tasks[a]},a.prototype.getAllTasks=function(){return this._tasks},a}(),d=function(){function a(a){this.description=a}return a.prototype.update=function(a){this.description=a},a}(),a.tm=new c}(window),function(a){return a.tv={},tv.setCategorySelected=function(){var a;return tv.deSelectAllCategories(),a=tm.getCategorySelectedIndex(),$('.category-item[index="'+a+'"]').attr("category-selected",!0)},tv.addTask=function(a,b){var c;return c=$(".task-list").append("div").attr("draggable",!0).attr("index",b),c.append("span").innerHtml("#").addClass("draggable-hash"),c.append("input").val(a).attr("index",b).attr("type","text"),c.append("span").addClass("close").innerHtml("x").attr("index",b),c.addClass("task-item")},tv.loadTasksList=function(){var a,b,c,d,e,f;for(c=tm.getAllTasks(),f=[],a=d=0,e=c.length;e>d;a=++d)b=c[a],f.push(tv.addTask(b.description,a));return f},tv.addCategory=function(a){var b;return b=$(".category-list").append("div"),b.innerHtml(a),b.addClass("category-item"),b.attr("category-selected",!1),b.attr("index",tm.getCategoryCount())},tv.deSelectAllCategories=function(){var a,b,c,d,e;for(d=$.all("[index]"),e=[],b=0,c=d.length;c>b;b++)a=d[b],e.push(a.attr("category-selected",!1));return e},tv.clearTasksList=function(){return $(".task-list").innerHtml("")},tv.clearCategoryName=function(){return $("#categoryName").val("")},tv.clearTaskName=function(){return $("#taskName").val("")}}(window),$("#addTaskButton").click(function(){var a;return a=$("#taskName").val(),a.length>0?(tm.addTask(a),tv.clearTaskName(),tv.clearTasksList(),tv.loadTasksList()):void 0}),$("#addCategoryButton").click(function(){var a;return a=$("#categoryName").val(),a.length>0?(tv.addCategory(a),tm.addCategory(a),tv.clearCategoryName()):void 0}),$(".task-item").live("dragstart",function(a,b){var c;return c=$(a).attr("index"),b.dataTransfer.setData("index",c),!0}),$(".category-item").live("dragenter",function(a,b){return b.preventDefault(),!0}),$(".category-item").live("dragenter",function(a){return a.classList.add("over")}),$(".category-item").live("dragleave",function(a){return a.classList.remove("over")}),$(".category-item").live("dragover",function(a,b){return b.preventDefault(),!1}),$(".category-item").live("drop",function(a,b){var c,d;return c=b.dataTransfer.getData("index"),a.classList.remove("over"),d=tm.getTask(c),tm.removeTask(c),tm.setCategorySelectedIndex($(a).attr("index")),tm.addTask(d.description),tv.clearTasksList(),tv.loadTasksList(tm.getAllTasks()),tv.setCategorySelected()}),$(".close").live("click",function(a){var b;return b=$(a).attr("index"),tm.removeTask(b),tv.clearTasksList(),tv.loadTasksList(tm.getAllTasks())}),$('.task-item input[type="text"]').live("focusout",function(a){var b,c;return c=$(a).val(),b=$(a).attr("index"),tm.updateTask(b,c),tv.clearTasksList(),tv.loadTasksList()}),$(".category-item").live("click",function(a){var b;return b=$(a).attr("index"),tm.setCategorySelectedIndex(b),tv.setCategorySelected(),tv.clearTasksList(),tv.loadTasksList()}),$("#categoryName").val("Pending"),$("#addCategoryButton")._domItem.click(),$("#categoryName").val("On Hold"),$("#addCategoryButton")._domItem.click(),$("#categoryName").val("Doing"),$("#addCategoryButton")._domItem.click(),$("[index]")._domItem.click(),tm.addTask("Eat a pie"),tm.addTask("Drink some tea"),tm.addTask("Play squash"),tv.loadTasksList()}).call(this);